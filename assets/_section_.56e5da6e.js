import{H as M,T as y,M as w}from"./components.3d787212.js";import{_ as H}from"./Component.0c2e8fe8.js";import{u as C,e as I}from"./gql.3486b515.js";import{g as t,h as L,i as N,j as S,x as A,c as B,k as c,w as D,p as E,o as R,b as F}from"./entry.aa641b54.js";import{s as g}from"./useSlugify.31da7e80.js";import"./scrollToTop.vue.5fa666c7.js";import"./LoadingSpinner.95f33edd.js";const z={__name:"[section]",setup(G){const m=t({}),p=t(""),f=t([]),v=t(""),r=t(""),u=t([]),_=t(0),b=t(""),h=t(!1),i=L(),k=async()=>{m.value=await C("getDocumentation",()=>I({href:i.params.section})).then(({data:n})=>{if(!n.value||!n.value.currentDoc.data[0])return E("/docs");const o=n.value.currentDoc.data[0].attributes,a=o.subsections.findIndex(e=>e.href===i.params.section);b.value=o.subsections[a].title,v.value=o.section_title,u.value=n.value.allLinks.data.flatMap(e=>e.attributes.subsections),r.value=i.hash.replace(/^#+/,""),_.value=u.value.findIndex(e=>e.title===o.subsections[a].title);const{content:l}=o.subsections[a],s=[],T=new DOMParser().parseFromString(l,"text/html");let d=-1;for(const e of T.body.childNodes)e.localName==="h1"&&(s.push({title:e.outerText,subtitles:[]}),d+=1,e.id=g(e.outerText)),e.localName==="h2"&&d!=-1&&(s[d].subtitles.push(e.outerText),e.id=g(e.outerText));return p.value=T.documentElement.outerHTML,f.value=s,n.value.allLinks.data.map(e=>({section_title:e.attributes.section_title,subsections:e.attributes.subsections}))})};return N(async()=>{await S(async()=>{await k(),h.value=!0})}),A(async n=>{r.value=n.hash.replace(/^#+/,"")}),(n,o)=>{const a=y,l=w,s=M,x=H;return R(),B("div",null,[c(s,null,{default:D(()=>[c(a,null,{default:D(()=>[F("Documentation")]),_:1}),c(l,{name:"description",content:"Collection of MITRE SAFÂ© documentation"})]),_:1}),c(x,{"all-links":u.value,"current-heading":r.value,"current-index":_.value,"current-section-title":v.value,"current-subsection":b.value,"doc-data":m.value,"is-loaded":h.value,"table-of-contents":f.value,"rendered-content":p.value},null,8,["all-links","current-heading","current-index","current-section-title","current-subsection","doc-data","is-loaded","table-of-contents","rendered-content"])])}}};export{z as default};
