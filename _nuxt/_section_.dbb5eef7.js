import{H as y,T as w,M as H}from"./components.be6aabdc.js";import{_ as I}from"./Component.vue.dfbab7d1.js";import{u as C}from"./asyncData.47a5955a.js";import{g as n,h as L,i as N,j as S,x as A,c as B,k as r,w as T,p as E,o as R,b as F}from"./entry.cd87f4bf.js";import{s as g}from"./useSlugify.31da7e80.js";import"./scrollToTop.vue.3b085fd7.js";import"./LoadingSpinner.2de385ac.js";const z={__name:"[section]",setup(G){const m=n({}),f=n(""),p=n([]),v=n(""),u=n(""),i=n([]),b=n(0),_=n(""),h=n(!1),c=L(),k=async()=>{m.value=await C("getDocumentation",()=>GqlGetDocumentation({href:c.params.section})).then(({data:t})=>{if(!t.value||!t.value.currentDoc.data[0])return E("/docs");const o=t.value.currentDoc.data[t.value.currentDoc.data.findIndex(e=>e.attributes.subsections.find(M=>M.href===c.params.section))].attributes,a=o.subsections.findIndex(e=>e.href===c.params.section);_.value=o.subsections[a].title,v.value=o.section_title,i.value=t.value.allLinks.data.flatMap(e=>e.attributes.subsections),u.value=c.hash.replace(/^#+/,""),b.value=i.value.findIndex(e=>e.title===o.subsections[a].title);const{content:l}=o.subsections[a],s=[],D=new DOMParser().parseFromString(l,"text/html");let d=-1;for(const e of D.body.childNodes)e.localName==="h1"&&(s.push({title:e.outerText,subtitles:[]}),d+=1,e.id=g(e.outerText)),e.localName==="h2"&&d!=-1&&(s[d].subtitles.push(e.outerText),e.id=g(e.outerText));return f.value=D.documentElement.outerHTML,p.value=s,t.value.allLinks.data.map(e=>({section_title:e.attributes.section_title,subsections:e.attributes.subsections}))})};return N(async()=>{await S(async()=>{await k(),h.value=!0})}),A(async t=>{u.value=t.hash.replace(/^#+/,"")}),(t,o)=>{const a=w,l=H,s=y,x=I;return R(),B("div",null,[r(s,null,{default:T(()=>[r(a,null,{default:T(()=>[F("Documentation")]),_:1}),r(l,{name:"description",content:"Collection of MITRE SAFÂ© documentation"})]),_:1}),r(x,{"all-links":i.value,"current-heading":u.value,"current-index":b.value,"current-section-title":v.value,"current-subsection":_.value,"doc-data":m.value,"is-loaded":h.value,"table-of-contents":p.value,"rendered-content":f.value},null,8,["all-links","current-heading","current-index","current-section-title","current-subsection","doc-data","is-loaded","table-of-contents","rendered-content"])])}}};export{z as default};
